# 系统架构设计

本项目采用前后端分离架构设计，后端基于 Flask 构建 RESTful API 服务，前端分为管理员后台（基于 Vue3）与用户端小程序（基于 uni-app）。系统同时集成了推荐算法模块与可视化模块，支持多端访问与数据交互。

---

## 一、系统架构总览

```
            +---------------------+
            |     用户端小程序     |
            |   uni-app (Vue 3)   |
            +---------------------+
                      |
                      | HTTP (Token 认证)
                      v
            +---------------------+
            |     后端接口服务     |
            |  Flask + RESTful API|
            +---------------------+
                      |
       +--------------+-----------------+
       |                                |
+---------------+           +----------------------+
|  数据库 MySQL  |           |  推荐算法模块 Python |
+---------------+           +----------------------+
       |
+---------------+
| Redis 缓存服务 |
+---------------+

                      ^
                      |
            +---------------------+
            | 管理端后台管理系统   |
            | Vue3 + Element Plus |
            +---------------------+
```

---

## 二、模块划分说明

### ✅ 后端模块（Flask）

| 模块         | 描述                                |
| ------------ | ----------------------------------- |
| `models/`    | SQLAlchemy ORM 定义数据模型         |
| `routes/`    | API 路由层，定义接口逻辑            |
| `services/`  | 业务逻辑处理与权限控制              |
| `recommend/` | 推荐算法实现模块（规则/协同过滤等） |
| `utils/`     | 工具函数（日志、响应封装、JWT 等）  |

### ✅ 前端模块（Vue3 管理端）

- 页面组织：按模块（如用户管理、订单管理）划分 views
- 路由控制：基于 vue-router 组织嵌套路由
- 状态管理：使用 Pinia 管理用户状态、权限、订单等
- 接口通信：统一封装 axios 实例，支持 token 注入与错误处理
- 组件复用：抽象表格、搜索表单、弹窗等通用组件

### ✅ 小程序端（uni-app）

- 页面注册：通过 pages.json 定义页面路径
- 组件化：使用自定义组件配合 uni UI 实现界面
- 状态管理：Pinia 管理登录状态、购物车、订单等
- 请求模块：统一封装 request.js 实现后端交互

---

## 三、数据流简要说明

1. 用户登录后获取 JWT Token
2. 前端在请求头附加 Token 与后端接口交互
3. 后端验证 Token，执行业务逻辑，读写数据库
4. 推荐模块在用户点餐后计算推荐菜品，返回给前端
5. 后端统一返回封装响应（状态码、提示、数据）

---

## 四、安全与扩展性设计

- 所有接口统一鉴权（JWT + 权限角色校验）
- 模块间解耦，推荐模块可独立部署或重构
- 使用 `.env` 配置环境变量，方便迁移与部署
- 支持多端部署（浏览器 + 微信小程序）
