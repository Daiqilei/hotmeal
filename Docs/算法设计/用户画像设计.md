# 用户画像设计文档

用户画像（User Profile）是实现个性化推荐的重要基础。HotMeal 系统通过构建用户画像，挖掘用户行为与偏好，提升推荐菜品的准确性与满意度。

---

## 一、用户画像的构成维度

| 维度     | 数据来源            | 说明                                        |
| -------- | ------------------- | ------------------------------------------- |
| 基础信息 | 用户注册数据        | account、phone、role、注册时间等            |
| 行为特征 | 用户订单历史        | 点过哪些菜、频次、时间段、金额等            |
| 偏好特征 | 点餐记录 + 标签聚合 | 偏好口味（辣/甜/清淡）、菜系（川菜/粤菜）等 |
| 饮食习惯 | 菜品类型统计        | 喜欢热菜/主食/饮料的占比分析                |
| 推荐反馈 | 推荐点击与下单行为  | 用户对推荐菜品的接受程度                    |

---

## 二、用户画像数据样例

```json
{
  "user_id": 101,
  "username": "小明",
  "preferred_cuisine": ["川菜", "湘菜"],
  "taste_tags": ["麻", "辣"],
  "order_time_range": ["中午", "晚上"],
  "avg_price": 32.5,
  "top_dishes": ["宫保鸡丁", "鱼香肉丝"],
  "dish_type_ratio": {
    "热菜": 0.6,
    "主食": 0.2,
    "饮料": 0.2
  }
}
```

---

## 三、用户画像的生成方式

1. 基于订单记录统计（订单、订单项表）
2. 将菜品信息中的标签（如口味、分类）聚合为用户偏好
3. 记录下单时间、金额等行为特征
4. （可选）接入推荐模块反馈数据，更新点击/下单转换率
5. 周期性离线计算（如每日更新）

---

## 四、用途场景

- 个性化推荐模块输入特征
- 商家用户画像分析（供运营参考）
- 推荐结果解释（推荐理由如“根据你爱吃辣”）
- 数据可视化展示用户消费偏好

---

## 五、扩展方向

- 引入地理位置、节日偏好、设备类型等上下文信息
- 使用聚类/Embedding 表示用户，进行相似用户推荐
- 联合菜品 Embedding 模型做多模态推荐

---

## 六、用户画像存储方式建议

| 类型           | 存储建议                         |
| -------------- | -------------------------------- |
| 实时更新画像   | Redis / MongoDB 等               |
| 离线画像计算   | MySQL 表 / Parquet 文件          |
| 可视化图表使用 | 存入分析库（如 Superset 数据源） |

---

通过用户画像构建，HotMeal 系统可在冷启动、推荐排序、兴趣挖掘等多个模块中实现智能化增强，提升整体用户体验。
