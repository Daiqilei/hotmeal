{"swagger": "2.0", "basePath": "/api/v1", "paths": {"/admin/admin": {"get": {"responses": {"403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u6743\u9650\u9a8c\u8bc1\u901a\u8fc7"}}, "summary": "\u6d4b\u8bd5\u7ba1\u7406\u5458\u6743\u9650\u7684\u63a5\u53e3\u3002", "description": "\u53ea\u6709\u62e5\u6709 ADMIN \u89d2\u8272\u7684\u7528\u6237\u624d\u80fd\u8bbf\u95ee\u3002", "operationId": "admin_permission_test", "security": [{"jsonWebToken": []}], "tags": ["users"]}}, "/admin/users": {"get": {"responses": {"200": {"description": "Success"}}, "summary": "\u5217\u51fa\u6240\u6709\u6d3b\u8dc3\u7528\u6237 (\u4ec5\u7ba1\u7406\u5458)", "operationId": "admin_list_users", "security": [{"jsonWebToken": []}], "tags": ["users"]}}, "/admin/users/{user_id}": {"parameters": [{"in": "path", "description": "\u8981\u7ba1\u7406\u7684\u7528\u6237 ID", "name": "user_id", "required": true, "type": "integer"}], "put": {"responses": {"500": {"description": "\u66f4\u65b0\u5931\u8d25"}, "409": {"description": "\u8d26\u53f7/\u90ae\u7bb1/\u624b\u673a\u53f7\u51b2\u7a81"}, "404": {"description": "User not found"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u65e0\u6548\u7684\u8f93\u5165\u6570\u636e"}, "200": {"description": "\u7528\u6237\u4fe1\u606f\u66f4\u65b0\u6210\u529f", "schema": {"$ref": "#/definitions/UserOutput"}}}, "summary": "\u66f4\u65b0\u6307\u5b9a\u7528\u6237\u7684\u4fe1\u606f (\u4ec5\u7ba1\u7406\u5458)", "operationId": "admin_update_user", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/AdminUserUpdate"}}], "security": [{"jsonWebToken": []}], "tags": ["users"]}, "get": {"responses": {"500": {"description": "\u83b7\u53d6\u7528\u6237\u5931\u8d25"}, "404": {"description": "User not found"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u7528\u6237\u5df2\u627e\u5230", "schema": {"$ref": "#/definitions/UserOutput"}}}, "summary": "\u83b7\u53d6\u6307\u5b9a\u7528\u6237\u7684\u8be6\u7ec6\u4fe1\u606f (\u4ec5\u7ba1\u7406\u5458)", "operationId": "admin_get_user", "security": [{"jsonWebToken": []}], "tags": ["users"]}, "delete": {"responses": {"500": {"description": "Deletion failed"}, "409": {"description": "Cannot delete user, possibly due to related data"}, "404": {"description": "User not found"}, "403": {"description": "Admin privileges required"}, "401": {"description": "Authentication required"}, "204": {"description": "User deleted successfully"}}, "summary": "Permanently deletes a specific user (hard delete, admin only)", "operationId": "admin_delete_user", "security": [{"jsonWebToken": []}], "tags": ["users"]}}, "/auth/token": {"post": {"responses": {"500": {"description": "\u767b\u5f55\u5931\u8d25"}, "401": {"description": "\u65e0\u6548\u7684\u8d26\u53f7\u6216\u5bc6\u7801"}, "200": {"description": "\u767b\u5f55\u6210\u529f", "schema": {"$ref": "#/definitions/Token"}}}, "summary": "\u7528\u6237\u767b\u5f55\u5e76\u751f\u6210\u8bbf\u95ee\u4ee4\u724c", "operationId": "generate_token", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/UserLogin"}}], "tags": ["auth"]}}, "/categories/": {"get": {"responses": {"500": {"description": "\u83b7\u53d6\u5217\u8868\u5931\u8d25"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u5206\u7c7b\u5217\u8868", "schema": {"type": "array", "items": {"$ref": "#/definitions/CategoryOutput"}}}}, "summary": "\u83b7\u53d6\u5206\u7c7b\u5217\u8868 (\u53ef\u9009\u6309\u7236 ID \u8fc7\u6ee4\uff0c\u53ef\u9009\u5305\u542b\u5df2\u5220\u9664)", "operationId": "list_categories", "parameters": [{"type": "integer", "location": "args", "in": "query", "description": "\u6309\u7236\u5206\u7c7b ID \u8fc7\u6ee4 (\u4e0d\u4f20\u8868\u793a\u83b7\u53d6\u9876\u7ea7\u5206\u7c7b)", "name": "parent_id"}, {"type": "boolean", "default": false, "location": "args", "in": "query", "description": "\u662f\u5426\u5305\u542b\u5df2\u5220\u9664\u7684\u5206\u7c7b (true/false)", "name": "include_deleted"}], "tags": ["categories"]}, "post": {"responses": {"500": {"description": "\u521b\u5efa\u5931\u8d25"}, "409": {"description": "\u5206\u7c7b\u540d\u79f0\u5df2\u5b58\u5728"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u53c2\u6570\u65e0\u6548"}, "201": {"description": "\u5206\u7c7b\u521b\u5efa\u6210\u529f", "schema": {"$ref": "#/definitions/CategoryOutput"}}}, "summary": "\u521b\u5efa\u65b0\u5206\u7c7b (\u4ec5\u7ba1\u7406\u5458)", "operationId": "create_category", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/CategoryCreateInput"}}], "security": [{"jsonWebToken": []}], "tags": ["categories"]}}, "/categories/{category_id}": {"parameters": [{"in": "path", "description": "\u5206\u7c7b ID", "name": "category_id", "required": true, "type": "integer"}], "put": {"responses": {"500": {"description": "\u66f4\u65b0\u5931\u8d25"}, "409": {"description": "\u5206\u7c7b\u540d\u79f0\u5df2\u5b58\u5728\u6216\u7236\u5206\u7c7b\u65e0\u6548"}, "404": {"description": "\u5206\u7c7b\u672a\u627e\u5230"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u53c2\u6570\u65e0\u6548"}, "200": {"description": "\u5206\u7c7b\u66f4\u65b0\u6210\u529f", "schema": {"$ref": "#/definitions/CategoryOutput"}}}, "summary": "\u66f4\u65b0\u6307\u5b9a ID \u7684\u5206\u7c7b\u4fe1\u606f (\u4ec5\u7ba1\u7406\u5458)", "operationId": "update_category", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/CategoryUpdateInput"}}], "security": [{"jsonWebToken": []}], "tags": ["categories"]}, "get": {"responses": {"500": {"description": "\u83b7\u53d6\u8be6\u60c5\u5931\u8d25"}, "404": {"description": "\u5206\u7c7b\u672a\u627e\u5230"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u5206\u7c7b\u8be6\u60c5", "schema": {"$ref": "#/definitions/CategoryOutput"}}}, "summary": "\u83b7\u53d6\u6307\u5b9a ID \u7684\u5206\u7c7b\u8be6\u60c5 (\u53ef\u9009\u5305\u542b\u5df2\u5220\u9664)", "operationId": "get_category_detail", "parameters": [{"type": "boolean", "default": false, "location": "args", "in": "query", "description": "\u662f\u5426\u5305\u542b\u5df2\u5220\u9664\u7684\u5206\u7c7b (true/false)", "name": "include_deleted"}], "tags": ["categories"]}, "delete": {"responses": {"500": {"description": "\u5220\u9664\u5931\u8d25"}, "409": {"description": "\u65e0\u6cd5\u5220\u9664\uff0c\u5b58\u5728\u5b50\u5206\u7c7b\u6216\u5173\u8054\u6570\u636e"}, "404": {"description": "\u5206\u7c7b\u672a\u627e\u5230"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "204": {"description": "\u5206\u7c7b\u5220\u9664\u6210\u529f"}}, "summary": "\u5220\u9664\u6307\u5b9a ID \u7684\u5206\u7c7b (\u9ed8\u8ba4\u4e3a\u8f6f\u5220\u9664\uff0c\u53ef\u9009\u6c38\u4e45\u5220\u9664\uff0c\u4ec5\u7ba1\u7406\u5458)", "operationId": "delete_category", "parameters": [{"type": "boolean", "default": false, "location": "args", "in": "query", "description": "\u662f\u5426\u6c38\u4e45\u5220\u9664 (true/false)\uff0c\u9ed8\u8ba4\u4e3a\u8f6f\u5220\u9664", "name": "permanent"}], "security": [{"jsonWebToken": []}], "tags": ["categories"]}}, "/categories/{category_id}/restore": {"parameters": [{"in": "path", "description": "\u5206\u7c7b ID", "name": "category_id", "required": true, "type": "integer"}], "post": {"responses": {"500": {"description": "\u6062\u590d\u5931\u8d25"}, "409": {"description": "\u65e0\u6cd5\u6062\u590d\uff08\u4f8b\u5982\u7236\u5206\u7c7b\u5df2\u5220\u9664\uff09"}, "404": {"description": "\u5206\u7c7b\u672a\u627e\u5230\u6216\u65e0\u9700\u6062\u590d"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u5206\u7c7b\u6062\u590d\u6210\u529f", "schema": {"$ref": "#/definitions/CategoryOutput"}}}, "summary": "\u6062\u590d\u8f6f\u5220\u9664\u7684\u5206\u7c7b (\u4ec5\u7ba1\u7406\u5458)", "operationId": "restore_category", "security": [{"jsonWebToken": []}], "tags": ["categories"]}}, "/chats/": {"get": {"responses": {"500": {"description": "\u83b7\u53d6\u8bb0\u5f55\u5931\u8d25"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u804a\u5929\u8bb0\u5f55", "schema": {"$ref": "#/definitions/ChatHistoryOutput"}}}, "summary": "\u83b7\u53d6\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u804a\u5929\u8bb0\u5f55\uff08\u5206\u9875\uff09", "operationId": "get_my_chat_history", "parameters": [{"type": "integer", "default": 20, "location": "args", "in": "query", "description": "\u6bcf\u9875\u6570\u91cf", "name": "per_page"}, {"type": "integer", "default": 1, "location": "args", "in": "query", "description": "\u9875\u7801", "name": "page"}], "security": [{"jsonWebToken": []}], "tags": ["chats"]}, "post": {"responses": {"500": {"description": "\u521b\u5efa\u6216\u5904\u7406\u5931\u8d25"}, "404": {"description": "\u7528\u6237\u4e0d\u5b58\u5728"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u53c2\u6570\u65e0\u6548"}, "201": {"description": "\u804a\u5929\u8bb0\u5f55\u521b\u5efa\u6210\u529f", "schema": {"$ref": "#/definitions/ChatOutput"}}}, "summary": "\u7528\u6237\u53d1\u8d77\u65b0\u7684\u804a\u5929\u63d0\u95ee", "operationId": "create_chat", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/ChatAskInput"}}], "security": [{"jsonWebToken": []}], "tags": ["chats"]}}, "/chats/ai_direct": {"post": {"responses": {"500": {"description": "AI \u670d\u52a1\u8c03\u7528\u5931\u8d25"}, "429": {"description": "\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u6d88\u606f\u4e3a\u7a7a"}, "200": {"description": "AI \u56de\u590d\u6210\u529f", "schema": {"$ref": "#/definitions/AiChatOutput"}}}, "summary": "\u76f4\u63a5\u8c03\u7528 AI \u6a21\u578b\u8fdb\u884c\u5bf9\u8bdd (\u4e0d\u4fdd\u5b58\u8bb0\u5f55)", "operationId": "direct_ai_chat", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/AiChatInput"}}], "security": [{"jsonWebToken": []}], "tags": ["chats"]}}, "/chats/pending": {"get": {"responses": {"500": {"description": "\u83b7\u53d6\u5931\u8d25"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6216\u5458\u5de5\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u5f85\u5904\u7406\u5217\u8868", "schema": {"type": "array", "items": {"$ref": "#/definitions/ChatOutput"}}}}, "summary": "\u83b7\u53d6\u5f85\u5904\u7406 (Pending \u6216 Processing) \u7684\u804a\u5929\u8bb0\u5f55\u5217\u8868 (\u4ec5\u7ba1\u7406\u5458/\u5458\u5de5)", "operationId": "list_pending_chats", "parameters": [{"type": "integer", "default": 100, "location": "args", "in": "query", "description": "\u6700\u5927\u8fd4\u56de\u6570\u91cf", "name": "limit"}], "security": [{"jsonWebToken": []}], "tags": ["chats"]}}, "/chats/{chat_id}": {"parameters": [{"in": "path", "description": "\u804a\u5929\u8bb0\u5f55 ID", "name": "chat_id", "required": true, "type": "integer"}], "get": {"responses": {"500": {"description": "\u83b7\u53d6\u5931\u8d25"}, "404": {"description": "\u804a\u5929\u8bb0\u5f55\u672a\u627e\u5230"}, "403": {"description": "\u65e0\u6743\u67e5\u770b\u6b64\u804a\u5929\u8bb0\u5f55"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u804a\u5929\u8be6\u60c5", "schema": {"$ref": "#/definitions/ChatOutput"}}}, "summary": "\u83b7\u53d6\u6307\u5b9a ID \u7684\u804a\u5929\u8bb0\u5f55\u8be6\u60c5", "operationId": "get_chat_detail", "security": [{"jsonWebToken": []}], "tags": ["chats"]}}, "/chats/{chat_id}/process": {"parameters": [{"in": "path", "description": "\u804a\u5929\u8bb0\u5f55 ID", "name": "chat_id", "required": true, "type": "integer"}], "post": {"responses": {"500": {"description": "\u5904\u7406\u5931\u8d25"}, "409": {"description": "\u804a\u5929\u8bb0\u5f55\u72b6\u6001\u65e0\u6cd5\u5904\u7406"}, "404": {"description": "\u804a\u5929\u8bb0\u5f55\u672a\u627e\u5230"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6216\u5458\u5de5\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u804a\u5929\u8bb0\u5f55\u5904\u7406\u6210\u529f", "schema": {"$ref": "#/definitions/ChatOutput"}}}, "summary": "\u89e6\u53d1\u5bf9\u6307\u5b9a\u804a\u5929\u8bb0\u5f55\u7684 AI \u56de\u590d\u5904\u7406 (\u4ec5\u7ba1\u7406\u5458/\u5458\u5de5)", "operationId": "process_chat_answer", "security": [{"jsonWebToken": []}], "tags": ["chats"]}}, "/dining-areas/": {"get": {"responses": {"500": {"description": "\u83b7\u53d6\u5217\u8868\u5931\u8d25"}, "400": {"description": "\u65e0\u6548\u7684\u8fc7\u6ee4\u53c2\u6570"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u7528\u9910\u533a\u57df\u5217\u8868", "schema": {"type": "array", "items": {"$ref": "#/definitions/DiningAreaOutput"}}}}, "summary": "\u83b7\u53d6\u7528\u9910\u533a\u57df\u5217\u8868 (\u53ef\u9009\u6309\u7c7b\u578b\u548c\u72b6\u6001\u8fc7\u6ee4)", "operationId": "list_dining_areas", "parameters": [{"type": "string", "location": "args", "in": "query", "description": "\u6309\u72b6\u6001\u8fc7\u6ee4 (FREE, OCCUPIED)", "name": "state"}, {"type": "string", "location": "args", "in": "query", "description": "\u6309\u533a\u57df\u7c7b\u578b\u8fc7\u6ee4 (PRIVATE, TABLE, BAR)", "name": "area_type"}], "tags": ["dining-areas"]}, "post": {"responses": {"500": {"description": "\u521b\u5efa\u5931\u8d25"}, "409": {"description": "\u533a\u57df\u540d\u79f0\u5df2\u5b58\u5728"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u53c2\u6570\u65e0\u6548"}, "201": {"description": "\u7528\u9910\u533a\u57df\u521b\u5efa\u6210\u529f", "schema": {"$ref": "#/definitions/DiningAreaOutput"}}}, "summary": "\u521b\u5efa\u65b0\u7684\u7528\u9910\u533a\u57df (\u4ec5\u7ba1\u7406\u5458)", "operationId": "create_dining_area", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/DiningAreaCreateInput"}}], "security": [{"jsonWebToken": []}], "tags": ["dining-areas"]}}, "/dining-areas/{area_id}": {"parameters": [{"in": "path", "description": "\u7528\u9910\u533a\u57df ID", "name": "area_id", "required": true, "type": "integer"}], "put": {"responses": {"404": {"description": "\u7528\u9910\u533a\u57df\u672a\u627e\u5230"}, "500": {"description": "\u66f4\u65b0\u5931\u8d25"}, "409": {"description": "\u540d\u79f0\u51b2\u7a81"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u53c2\u6570\u65e0\u6548"}, "200": {"description": "\u7528\u9910\u533a\u57df\u66f4\u65b0\u6210\u529f", "schema": {"$ref": "#/definitions/DiningAreaOutput"}}}, "summary": "\u66f4\u65b0\u6307\u5b9a ID \u7684\u7528\u9910\u533a\u57df\u4fe1\u606f (\u4ec5\u7ba1\u7406\u5458)", "operationId": "update_dining_area", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/DiningAreaUpdateInput"}}], "security": [{"jsonWebToken": []}], "tags": ["dining-areas"]}, "get": {"responses": {"404": {"description": "\u7528\u9910\u533a\u57df\u672a\u627e\u5230"}, "500": {"description": "\u83b7\u53d6\u5931\u8d25"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u7528\u9910\u533a\u57df\u8be6\u60c5", "schema": {"$ref": "#/definitions/DiningAreaOutput"}}}, "summary": "\u83b7\u53d6\u6307\u5b9a ID \u7684\u7528\u9910\u533a\u57df\u8be6\u60c5 (\u4ec5\u7ba1\u7406\u5458)", "operationId": "get_dining_area_detail", "security": [{"jsonWebToken": []}], "tags": ["dining-areas"]}, "delete": {"responses": {"404": {"description": "\u7528\u9910\u533a\u57df\u672a\u627e\u5230"}, "500": {"description": "\u5220\u9664\u5931\u8d25"}, "409": {"description": "\u533a\u57df\u88ab\u5360\u7528\u6216\u6709\u5173\u8054\u6570\u636e\uff0c\u65e0\u6cd5\u5220\u9664"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "204": {"description": "\u7528\u9910\u533a\u57df\u5220\u9664\u6210\u529f"}}, "summary": "\u6c38\u4e45\u5220\u9664\u6307\u5b9a ID \u7684\u7528\u9910\u533a\u57df (\u4ec5\u7ba1\u7406\u5458)", "operationId": "delete_dining_area", "security": [{"jsonWebToken": []}], "tags": ["dining-areas"]}}, "/dining-areas/{area_id}/assign": {"parameters": [{"in": "path", "description": "\u7528\u9910\u533a\u57df ID", "name": "area_id", "required": true, "type": "integer"}], "post": {"responses": {"500": {"description": "\u5206\u914d\u5931\u8d25"}, "409": {"description": "\u533a\u57df\u5df2\u88ab\u5360\u7528"}, "404": {"description": "\u533a\u57df\u6216User not found"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6216\u5458\u5de5\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u53c2\u6570\u65e0\u6548"}, "200": {"description": "\u7528\u9910\u533a\u57df\u5206\u914d\u6210\u529f", "schema": {"$ref": "#/definitions/DiningAreaOutput"}}}, "summary": "\u5c06\u7a7a\u95f2\u533a\u57df\u5206\u914d\u7ed9\u6307\u5b9a\u7528\u6237 (\u4ec5\u7ba1\u7406\u5458/\u5458\u5de5)", "operationId": "assign_dining_area", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/DiningAreaAssignInput"}}], "security": [{"jsonWebToken": []}], "tags": ["dining-areas"]}}, "/dining-areas/{area_id}/release": {"parameters": [{"in": "path", "description": "\u7528\u9910\u533a\u57df ID", "name": "area_id", "required": true, "type": "integer"}], "post": {"responses": {"500": {"description": "\u91ca\u653e\u5931\u8d25"}, "404": {"description": "\u533a\u57df\u672a\u627e\u5230"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6216\u5458\u5de5\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u7528\u9910\u533a\u57df\u91ca\u653e\u6210\u529f", "schema": {"$ref": "#/definitions/DiningAreaOutput"}}}, "summary": "\u91ca\u653e\u4e00\u4e2a\u5360\u7528\u7684\u7528\u9910\u533a\u57df (\u4ec5\u7ba1\u7406\u5458/\u5458\u5de5)", "operationId": "release_dining_area", "security": [{"jsonWebToken": []}], "tags": ["dining-areas"]}}, "/dishes/": {"get": {"responses": {"500": {"description": "\u83b7\u53d6\u5217\u8868\u5931\u8d25"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u53ef\u7528\u83dc\u54c1\u5217\u8868", "schema": {"type": "array", "items": {"$ref": "#/definitions/DishOutput"}}}}, "summary": "\u83b7\u53d6\u6240\u6709\u53ef\u7528\u7684\u83dc\u54c1\u5217\u8868 (\u516c\u5f00\u8bbf\u95ee)", "operationId": "list_available_dishes", "parameters": [{"type": "integer", "location": "args", "in": "query", "description": "\u6309\u5206\u7c7b ID \u8fc7\u6ee4 (\u53ef\u9009)", "name": "category_id"}], "tags": ["dishes"]}, "post": {"responses": {"500": {"description": "\u521b\u5efa\u5931\u8d25"}, "409": {"description": "\u83dc\u54c1\u540d\u79f0\u5df2\u5b58\u5728"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u53c2\u6570\u65e0\u6548"}, "201": {"description": "\u83dc\u54c1\u521b\u5efa\u6210\u529f", "schema": {"$ref": "#/definitions/DishOutput"}}}, "summary": "\u521b\u5efa\u65b0\u83dc\u54c1 (\u4ec5\u7ba1\u7406\u5458)", "operationId": "create_dish", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/DishCreateInput"}}], "security": [{"jsonWebToken": []}], "tags": ["dishes"]}}, "/dishes/{dish_id}": {"parameters": [{"in": "path", "description": "\u83dc\u54c1 ID", "name": "dish_id", "required": true, "type": "integer"}], "put": {"responses": {"500": {"description": "\u66f4\u65b0\u5931\u8d25"}, "409": {"description": "\u83dc\u54c1\u540d\u79f0\u5df2\u5b58\u5728"}, "404": {"description": "\u83dc\u54c1\u672a\u627e\u5230"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u53c2\u6570\u65e0\u6548"}, "200": {"description": "\u83dc\u54c1\u66f4\u65b0\u6210\u529f", "schema": {"$ref": "#/definitions/DishOutput"}}}, "summary": "\u66f4\u65b0\u6307\u5b9a ID \u7684\u83dc\u54c1\u4fe1\u606f (\u4ec5\u7ba1\u7406\u5458)", "operationId": "update_dish", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/DishUpdateInput"}}], "security": [{"jsonWebToken": []}], "tags": ["dishes"]}, "get": {"responses": {"500": {"description": "\u83b7\u53d6\u8be6\u60c5\u5931\u8d25"}, "404": {"description": "\u83dc\u54c1\u672a\u627e\u5230"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u83dc\u54c1\u8be6\u60c5", "schema": {"$ref": "#/definitions/DishOutput"}}}, "summary": "\u83b7\u53d6\u6307\u5b9a ID \u7684\u83dc\u54c1\u8be6\u60c5 (\u516c\u5f00\u8bbf\u95ee)", "operationId": "get_dish_detail", "tags": ["dishes"]}, "delete": {"responses": {"500": {"description": "\u5220\u9664\u5931\u8d25"}, "409": {"description": "\u65e0\u6cd5\u5220\u9664\uff0c\u5b58\u5728\u5173\u8054\u6570\u636e"}, "404": {"description": "\u83dc\u54c1\u672a\u627e\u5230"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "204": {"description": "\u83dc\u54c1\u6c38\u4e45\u5220\u9664\u6210\u529f"}}, "summary": "\u6c38\u4e45\u5220\u9664\u6307\u5b9a ID \u7684\u83dc\u54c1 (\u786c\u5220\u9664\uff0c\u4ec5\u7ba1\u7406\u5458)", "operationId": "delete_dish_permanently", "security": [{"jsonWebToken": []}], "tags": ["dishes"]}}, "/dishes/{dish_id}/availability": {"parameters": [{"in": "path", "description": "\u83dc\u54c1 ID", "name": "dish_id", "required": true, "type": "integer"}], "put": {"responses": {"500": {"description": "\u8bbe\u7f6e\u5931\u8d25"}, "404": {"description": "\u83dc\u54c1\u672a\u627e\u5230"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u53c2\u6570\u65e0\u6548"}, "200": {"description": "\u83dc\u54c1\u53ef\u7528\u6027\u8bbe\u7f6e\u6210\u529f"}}, "summary": "\u8bbe\u7f6e\u83dc\u54c1\u7684\u4e0a\u67b6\u6216\u4e0b\u67b6\u72b6\u6001 (\u4ec5\u7ba1\u7406\u5458)", "operationId": "set_dish_availability", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/SetAvailabilityInput"}}], "security": [{"jsonWebToken": []}], "tags": ["dishes"]}}, "/health": {"get": {"responses": {"200": {"description": "Success"}}, "summary": "Health check endpoint", "operationId": "Health check", "tags": ["health"]}}, "/orders/": {"get": {"responses": {"500": {"description": "\u83b7\u53d6\u5217\u8868\u5931\u8d25"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6216\u5458\u5de5\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u8ba2\u5355\u5217\u8868 (\u5206\u9875)", "schema": {"$ref": "#/definitions/OrderListOutput"}}}, "summary": "\u83b7\u53d6\u6240\u6709\u8ba2\u5355\u7684\u5206\u9875\u5217\u8868 (\u4ec5\u7ba1\u7406\u5458/\u5458\u5de5)", "operationId": "list_all_orders", "parameters": [{"type": "boolean", "default": false, "location": "args", "in": "query", "description": "\u662f\u5426\u5305\u542b\u8ba2\u5355\u9879\u8be6\u60c5", "name": "include_items"}, {"type": "integer", "default": 10, "location": "args", "in": "query", "description": "\u6bcf\u9875\u6570\u91cf", "name": "per_page"}, {"type": "integer", "default": 1, "location": "args", "in": "query", "description": "\u9875\u7801", "name": "page"}], "security": [{"jsonWebToken": []}], "tags": ["orders"]}, "post": {"responses": {"500": {"description": "\u521b\u5efa\u8ba2\u5355\u5931\u8d25"}, "409": {"description": "\u5e93\u5b58\u4e0d\u8db3\u6216\u83dc\u54c1\u4e0d\u53ef\u7528"}, "404": {"description": "\u7528\u6237\u3001\u533a\u57df\u6216\u83dc\u54c1\u672a\u627e\u5230"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u53c2\u6570\u65e0\u6548"}, "201": {"description": "\u8ba2\u5355\u521b\u5efa\u6210\u529f", "schema": {"$ref": "#/definitions/OrderOutput"}}}, "summary": "\u521b\u5efa\u65b0\u8ba2\u5355", "operationId": "create_order", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/OrderCreateInput"}}], "security": [{"jsonWebToken": []}], "tags": ["orders"]}}, "/orders/me": {"get": {"responses": {"500": {"description": "\u83b7\u53d6\u8ba2\u5355\u5931\u8d25"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u6211\u7684\u8ba2\u5355\u5217\u8868", "schema": {"type": "array", "items": {"$ref": "#/definitions/OrderOutput"}}}}, "summary": "\u83b7\u53d6\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u8ba2\u5355\u5217\u8868", "operationId": "get_my_orders", "parameters": [{"type": "boolean", "default": false, "location": "args", "in": "query", "description": "\u662f\u5426\u5305\u542b\u8ba2\u5355\u9879\u8be6\u60c5 (true/false)", "name": "include_items"}], "security": [{"jsonWebToken": []}], "tags": ["orders"]}}, "/orders/{order_id}": {"parameters": [{"in": "path", "description": "\u8ba2\u5355 ID", "name": "order_id", "required": true, "type": "integer"}], "put": {"responses": {"404": {"description": "\u8ba2\u5355\u672a\u627e\u5230"}, "500": {"description": "\u66f4\u65b0\u5931\u8d25"}, "403": {"description": "\u9700\u8981\u7ba1\u7406\u5458\u6216\u5458\u5de5\u6743\u9650"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u8f93\u5165\u53c2\u6570\u65e0\u6548\u6216\u72b6\u6001\u8f6c\u6362\u65e0\u6548"}, "200": {"description": "\u8ba2\u5355\u4fe1\u606f\u66f4\u65b0\u6210\u529f", "schema": {"$ref": "#/definitions/OrderOutput"}}}, "summary": "\u66f4\u65b0\u6307\u5b9a\u8ba2\u5355\u7684\u4fe1\u606f (\u72b6\u6001\u3001\u652f\u4ed8\u65b9\u5f0f\u7b49\uff0c\u4ec5\u7ba1\u7406\u5458/\u5458\u5de5)", "operationId": "update_order_details", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/OrderUpdateInput"}}], "security": [{"jsonWebToken": []}], "tags": ["orders"]}, "get": {"responses": {"404": {"description": "\u8ba2\u5355\u672a\u627e\u5230"}, "500": {"description": "\u83b7\u53d6\u5931\u8d25"}, "403": {"description": "\u65e0\u6743\u67e5\u770b\u6b64\u8ba2\u5355"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u8ba2\u5355\u8be6\u60c5", "schema": {"$ref": "#/definitions/OrderOutput"}}}, "summary": "\u83b7\u53d6\u6307\u5b9a ID \u7684\u8ba2\u5355\u8be6\u60c5 (\u7ba1\u7406\u5458/\u5458\u5de5\u6216\u8ba2\u5355\u6240\u6709\u8005)", "operationId": "get_order_detail", "parameters": [{"type": "boolean", "default": true, "location": "args", "in": "query", "description": "\u662f\u5426\u5305\u542b\u8ba2\u5355\u9879\u8be6\u60c5", "name": "include_items"}], "security": [{"jsonWebToken": []}], "tags": ["orders"]}}, "/orders/{order_id}/cancel": {"parameters": [{"in": "path", "description": "\u8ba2\u5355 ID", "name": "order_id", "required": true, "type": "integer"}], "put": {"responses": {"500": {"description": "\u53d6\u6d88\u5931\u8d25"}, "409": {"description": "\u8ba2\u5355\u72b6\u6001\u65e0\u6cd5\u53d6\u6d88"}, "404": {"description": "\u8ba2\u5355\u672a\u627e\u5230"}, "403": {"description": "\u65e0\u6743\u53d6\u6d88\u6b64\u8ba2\u5355"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u8ba2\u5355\u53d6\u6d88\u6210\u529f"}}, "summary": "\u53d6\u6d88\u4e00\u4e2a\u5f85\u5904\u7406\u7684\u8ba2\u5355 (\u7ba1\u7406\u5458/\u5458\u5de5\u6216\u8ba2\u5355\u6240\u6709\u8005)", "operationId": "cancel_order", "security": [{"jsonWebToken": []}], "tags": ["orders"]}}, "/orders/{order_id}/delete": {"parameters": [{"in": "path", "description": "\u8ba2\u5355 ID", "name": "order_id", "required": true, "type": "integer"}], "delete": {"responses": {"500": {"description": "\u5220\u9664\u5931\u8d25"}, "409": {"description": "\u65e0\u6cd5\u5220\u9664\uff0c\u5b58\u5728\u4f9d\u8d56\u6216\u72b6\u6001\u4e0d\u5141\u8bb8"}, "404": {"description": "\u8ba2\u5355\u672a\u627e\u5230"}, "403": {"description": "\u65e0\u6743\u5220\u9664\u6b64\u8ba2\u5355 (\u786c\u5220\u9664\u9700\u8981\u7ba1\u7406\u5458)"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "204": {"description": "\u8ba2\u5355\u5220\u9664\u6210\u529f"}}, "summary": "\u5220\u9664\u8ba2\u5355 (\u7ba1\u7406\u5458/\u5458\u5de5\u6216\u6240\u6709\u8005\u53ef\u8f6f\u5220\u9664, \u4ec5\u7ba1\u7406\u5458\u53ef\u786c\u5220\u9664)", "operationId": "delete_order", "parameters": [{"type": "boolean", "default": false, "location": "args", "in": "query", "description": "\u662f\u5426\u6c38\u4e45\u5220\u9664 (true/false)\uff0c\u9ed8\u8ba4\u4e3a\u8f6f\u5220\u9664", "name": "permanent"}], "security": [{"jsonWebToken": []}], "tags": ["orders"]}}, "/orders/{order_id}/item/{order_item_id}": {"parameters": [{"in": "path", "description": "\u8ba2\u5355\u9879 ID", "name": "order_item_id", "required": true, "type": "integer"}, {"in": "path", "description": "\u8ba2\u5355 ID", "name": "order_id", "required": true, "type": "integer"}], "put": {"responses": {"409": {"description": "\u5e93\u5b58\u4e0d\u8db3\u6216\u8ba2\u5355\u72b6\u6001\u4e0d\u5141\u8bb8\u4fee\u6539"}, "404": {"description": "\u8ba2\u5355\u6216\u8ba2\u5355\u9879\u672a\u627e\u5230"}, "403": {"description": "\u65e0\u6743\u4fee\u6539\u6b64\u8ba2\u5355\u9879"}, "401": {"description": "\u672a\u6388\u6743"}, "400": {"description": "\u53c2\u6570\u9519\u8bef"}, "200": {"description": "\u8ba2\u5355\u9879\u6570\u91cf\u66f4\u65b0\u6210\u529f"}}, "summary": "\u66f4\u65b0\u6307\u5b9a\u8ba2\u5355\u9879\u7684\u6570\u91cf", "operationId": "update_order_item_quantity", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/UpdateOrderItemQuantity"}}], "security": [{"jsonWebToken": []}], "tags": ["orders"]}}, "/recommendations/": {"get": {"responses": {"400": {"description": "\u8bf7\u6c42\u53c2\u6570\u9519\u8bef"}, "500": {"description": "\u83b7\u53d6\u63a8\u8350\u65f6\u53d1\u751f\u9519\u8bef"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1\u6216\u4ee4\u724c\u65e0\u6548"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u63a8\u8350\u5217\u8868", "schema": {"$ref": "#/definitions/RecommendationOutput"}}}, "summary": "\u83b7\u53d6\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u63a8\u8350\u83dc\u54c1\u5217\u8868", "operationId": "get_recommendations", "parameters": [{"type": "string", "location": "args", "in": "query", "description": "\u7b56\u7565\u878d\u5408\u6743\u91cd\uff0c\u4ec5\u5f53 strategy=weighted \u65f6\u751f\u6548\u3002\u683c\u5f0f\u4e3a usercf,itemcf,popular\uff0c\u4f8b\u5982\uff1a0.5,0.3,0.2\uff0c\u603b\u548c\u5e94\u4e3a1.0", "name": "weights"}, {"type": "string", "default": "auto", "location": "args", "in": "query", "description": "\u63a8\u8350\u7b56\u7565\uff0c\u53ef\u9009\u503c\uff1a\n- auto\uff1a\u7cfb\u7edf\u81ea\u52a8\u878d\u5408\u591a\u79cd\u63a8\u8350\u7b97\u6cd5\uff08\u9ed8\u8ba4\uff09\n- popular\uff1a\u4ec5\u4f7f\u7528\u70ed\u95e8\u63a8\u8350\n- usercf\uff1a\u4f7f\u7528\u57fa\u4e8e\u7528\u6237\u7684\u534f\u540c\u8fc7\u6ee4\u63a8\u8350\n- profile\uff1a\u57fa\u4e8e\u7528\u6237\u753b\u50cf\u63a8\u8350\uff08\u9884\u7559\uff09", "name": "strategy"}, {"type": "integer", "default": 10, "location": "args", "in": "query", "description": "\u8fd4\u56de\u7684\u63a8\u8350\u6570\u91cf\u4e0a\u9650", "name": "limit"}], "security": [{"jsonWebToken": []}], "tags": ["recommendations"]}}, "/staff/users": {"get": {"responses": {"200": {"description": "\u7528\u6237\u5217\u8868\u83b7\u53d6\u6210\u529f"}}, "summary": "\u83b7\u53d6\u7528\u6237\u5217\u8868\uff0c\u53ef\u9009\u6309\u89d2\u8272\u8fc7\u6ee4\uff08\u4ec5\u7ba1\u7406\u5458\uff09", "operationId": "get_user_list_resource", "parameters": [{"description": "\u6309\u89d2\u8272\u8fc7\u6ee4\uff08\u53ef\u9009\uff0c\u4f8b\u5982 STAFF\uff09", "name": "role", "type": "string", "in": "query"}], "tags": ["staff"]}}, "/staff/users/{user_id}": {"put": {"responses": {"200": {"description": "\u5458\u5de5\u4fe1\u606f\u66f4\u65b0\u6210\u529f"}}, "summary": "\u66f4\u65b0\u5458\u5de5\u7528\u6237\u4fe1\u606f\uff08\u4ec5\u7ba1\u7406\u5458\uff09", "operationId": "put_staff_user_update", "parameters": [{"name": "user_id", "in": "path", "required": true, "type": "integer", "description": "\u8981\u66f4\u65b0\u7684\u5458\u5de5\u7528\u6237 ID"}], "tags": ["staff"]}}, "/users/me": {"put": {"responses": {"500": {"description": "\u66f4\u65b0\u4e2a\u4eba\u8d44\u6599\u5931\u8d25"}, "409": {"description": "\u90ae\u7bb1/\u624b\u673a\u53f7/\u7528\u6237\u540d\u51b2\u7a81"}, "404": {"description": "User not found"}, "400": {"description": "\u65e0\u6548\u7684\u8f93\u5165\u6570\u636e"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u4e2a\u4eba\u8d44\u6599\u66f4\u65b0\u6210\u529f", "schema": {"$ref": "#/definitions/UserOutput"}}}, "summary": "\u66f4\u65b0\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u4e2a\u4eba\u8d44\u6599", "operationId": "update_own_profile", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/ProfileUpdate"}}], "security": [{"jsonWebToken": []}], "tags": ["users"]}, "get": {"responses": {"500": {"description": "\u83b7\u53d6\u4e2a\u4eba\u8d44\u6599\u5931\u8d25"}, "404": {"description": "User not found"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "200": {"description": "\u6210\u529f\u83b7\u53d6\u4e2a\u4eba\u8d44\u6599", "schema": {"$ref": "#/definitions/UserOutput"}}}, "summary": "\u83b7\u53d6\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u4e2a\u4eba\u8d44\u6599", "operationId": "get_own_profile", "security": [{"jsonWebToken": []}], "tags": ["users"]}}, "/users/me/avatar": {"put": {"responses": {"500": {"description": "\u66f4\u65b0\u5931\u8d25"}, "404": {"description": "\u7528\u6237\u4e0d\u5b58\u5728"}, "401": {"description": "\u9700\u8981\u8ba4\u8bc1"}, "400": {"description": "\u5934\u50cf\u94fe\u63a5\u65e0\u6548"}, "200": {"description": "\u5934\u50cf\u66f4\u65b0\u6210\u529f\uff0c\u8fd4\u56de\u65b0\u5934\u50cf\u94fe\u63a5", "schema": {"type": "object"}}}, "summary": "\u66f4\u65b0\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u5934\u50cf URL\uff08\u9700\u5148\u4e0a\u4f20\u56fe\u7247\uff09", "operationId": "update_own_avatar", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/AvatarUpdate"}}], "security": [{"jsonWebToken": []}], "tags": ["users"]}}, "/users/register": {"post": {"responses": {"500": {"description": "\u6ce8\u518c\u5931\u8d25"}, "409": {"description": "\u8d26\u53f7\u540d\u5df2\u5b58\u5728"}, "400": {"description": "\u65e0\u6548\u7684\u8f93\u5165\u6570\u636e"}, "201": {"description": "\u7528\u6237\u6ce8\u518c\u6210\u529f", "schema": {"$ref": "#/definitions/Token"}}}, "summary": "\u7528\u6237\u6ce8\u518c", "operationId": "register_user", "parameters": [{"name": "payload", "required": true, "in": "body", "schema": {"$ref": "#/definitions/UserRegister"}}], "security": [], "tags": ["users"]}}}, "info": {"title": "HotMeal API", "version": "1.0", "description": "HotMeal API \u6587\u6863"}, "produces": ["application/json"], "consumes": ["application/json"], "tags": [{"name": "health", "description": "Health check related APIs"}, {"name": "users", "description": "\u7528\u6237\u6ce8\u518c\u3001\u8ba4\u8bc1\u548c\u7ba1\u7406\u64cd\u4f5c"}, {"name": "users", "description": "\u7ba1\u7406\u5458\u4e13\u5c5e\u63a5\u53e3"}, {"name": "categories", "description": "\u5206\u7c7b\u7ba1\u7406\u64cd\u4f5c"}, {"name": "dishes", "description": "\u83dc\u54c1\u7ba1\u7406\u64cd\u4f5c"}, {"name": "orders", "description": "\u8ba2\u5355\u7ba1\u7406\u64cd\u4f5c"}, {"name": "dining-areas", "description": "\u7528\u9910\u533a\u57df\u7ba1\u7406\u64cd\u4f5c"}, {"name": "chats", "description": "\u804a\u5929\u4ea4\u4e92\u64cd\u4f5c"}, {"name": "recommendations", "description": "\u83b7\u53d6\u83dc\u54c1\u63a8\u8350\u7684\u64cd\u4f5c"}, {"name": "auth", "description": "\u8ba4\u8bc1\u76f8\u5173\u64cd\u4f5c"}, {"name": "staff", "description": "\u5458\u5de5\u7ba1\u7406\u63a5\u53e3"}], "definitions": {"UserRegister": {"required": ["account", "password"], "properties": {"account": {"type": "string", "description": "\u7528\u6237\u8d26\u53f7\u540d (\u5fc5\u987b\u552f\u4e00)", "example": "john_doe"}, "password": {"type": "string", "description": "\u7528\u6237\u5bc6\u7801", "example": "StrongPwd!123", "minLength": 6}, "role": {"type": "string", "description": "\u7528\u6237\u89d2\u8272 (USER \u6216 ADMIN)", "default": "USER", "example": "USER", "enum": ["ADMIN", "USER"]}}, "type": "object"}, "Token": {"properties": {"token": {"type": "string", "description": "JWT \u8bbf\u95ee\u4ee4\u724c"}}, "type": "object"}, "ProfileUpdate": {"properties": {"username": {"type": "string", "description": "\u65b0\u7528\u6237\u540d", "example": "Johnny Doe", "maxLength": 50}, "email": {"type": "string", "description": "\u65b0\u90ae\u7bb1\u5730\u5740", "example": "john.doe.new@example.com", "maxLength": 120}, "phone_number": {"type": "string", "description": "\u65b0\u624b\u673a\u53f7", "example": "+8613800138000", "maxLength": 20}, "favorite_cuisine": {"type": "string", "description": "\u504f\u597d\u7684\u83dc\u7cfb (\u53ef\u9009, \u6e05\u7a7a\u4f20 null \u6216\u7a7a\u5b57\u7b26\u4e32)", "example": "\u5ddd\u83dc", "maxLength": 50}}, "type": "object"}, "UserOutput": {"properties": {"user_id": {"type": "integer", "description": "\u7528\u6237 ID"}, "account": {"type": "string", "description": "\u7528\u6237\u8d26\u53f7\u540d"}, "role": {"type": "string", "description": "\u7528\u6237\u89d2\u8272"}, "status": {"type": "string", "description": "\u7528\u6237\u72b6\u6001"}, "phone_number": {"type": "string", "description": "\u624b\u673a\u53f7"}, "email": {"type": "string", "description": "\u90ae\u7bb1\u5730\u5740"}, "username": {"type": "string", "description": "\u663e\u793a\u7528\u6237\u540d"}, "favorite_cuisine": {"type": "string", "description": "\u504f\u597d\u83dc\u7cfb"}, "created_at": {"type": "string", "format": "date-time", "description": "\u521b\u5efa\u65f6\u95f4 (ISO \u683c\u5f0f)"}, "updated_at": {"type": "string", "format": "date-time", "description": "\u6700\u540e\u66f4\u65b0\u65f6\u95f4 (ISO \u683c\u5f0f)"}}, "type": "object"}, "AvatarUpdate": {"required": ["avatar_url"], "properties": {"avatar_url": {"type": "string", "description": "\u5934\u50cf\u56fe\u7247 URL\uff0c\u5efa\u8bae\u4e3a MinIO \u4e0a\u4f20\u8fd4\u56de\u7684\u8bbf\u95ee\u5730\u5740", "example": "http://localhost:9000/avatars/avatar/abc123.jpg"}}, "type": "object"}, "AdminUserUpdate": {"properties": {"account": {"type": "string", "description": "\u65b0\u8d26\u53f7\u540d", "maxLength": 255}, "password": {"type": "string", "description": "\u65b0\u5bc6\u7801 (\u53ef\u9009, \u5c06\u88ab\u54c8\u5e0c)", "minLength": 6}, "role": {"type": "string", "description": "\u65b0\u89d2\u8272", "example": "ADMIN", "enum": ["ADMIN", "STAFF", "USER"]}, "email": {"type": "string", "description": "\u65b0\u90ae\u7bb1\u5730\u5740", "maxLength": 120}, "phone_number": {"type": "string", "description": "\u65b0\u624b\u673a\u53f7", "maxLength": 20}, "username": {"type": "string", "description": "\u65b0\u663e\u793a\u7528\u6237\u540d", "maxLength": 50}, "status": {"type": "string", "description": "\u65b0\u72b6\u6001", "example": "ACTIVE", "enum": ["ACTIVE", "BANNED", "DELETED"]}, "favorite_cuisine": {"type": "string", "description": "\u504f\u597d\u7684\u83dc\u7cfb", "maxLength": 50}}, "type": "object"}, "CategoryCreateInput": {"required": ["name"], "properties": {"name": {"type": "string", "description": "\u5206\u7c7b\u540d\u79f0 (\u5fc5\u987b\u552f\u4e00)", "example": "\u70ed\u83dc", "minLength": 1, "maxLength": 50}, "description": {"type": "string", "description": "\u5206\u7c7b\u63cf\u8ff0", "example": "\u5404\u79cd\u7092\u83dc\u3001\u7096\u83dc\u7b49"}, "img_url": {"type": "string", "description": "\u56fe\u7247\u94fe\u63a5 (URL)", "example": "http://example.com/hotdish.jpg"}, "parent_category_id": {"type": "integer", "description": "\u7236\u5206\u7c7b ID (\u53ef\u9009, \u7528\u4e8e\u521b\u5efa\u5b50\u5206\u7c7b)", "example": 1}}, "type": "object"}, "CategoryOutput": {"properties": {"category_id": {"type": "integer", "description": "\u5206\u7c7b ID"}, "name": {"type": "string", "description": "\u5206\u7c7b\u540d\u79f0"}, "description": {"type": "string", "description": "\u63cf\u8ff0"}, "img_url": {"type": "string", "description": "\u56fe\u7247 URL"}, "parent_category_id": {"type": "integer", "description": "\u7236\u5206\u7c7b ID"}, "subcategories_count": {"type": "integer", "description": "\u5b50\u5206\u7c7b\u6570\u91cf"}, "created_at": {"type": "string", "format": "date-time", "description": "\u521b\u5efa\u65f6\u95f4 (ISO \u683c\u5f0f)"}, "updated_at": {"type": "string", "format": "date-time", "description": "\u66f4\u65b0\u65f6\u95f4 (ISO \u683c\u5f0f)"}, "deleted_at": {"type": "string", "format": "date-time", "description": "\u5220\u9664\u65f6\u95f4 (ISO \u683c\u5f0f)"}}, "type": "object"}, "CategoryUpdateInput": {"properties": {"name": {"type": "string", "description": "\u65b0\u5206\u7c7b\u540d\u79f0", "example": "\u7cbe\u54c1\u70ed\u83dc", "minLength": 1, "maxLength": 50}, "description": {"type": "string", "description": "\u65b0\u5206\u7c7b\u63cf\u8ff0"}, "img_url": {"type": "string", "description": "\u65b0\u56fe\u7247\u94fe\u63a5"}, "parent_category_id": {"type": "integer", "description": "\u65b0\u7684\u7236\u5206\u7c7b ID (\u8bbe\u7f6e null \u8868\u793a\u9876\u7ea7\u5206\u7c7b)"}}, "type": "object"}, "DishCreateInput": {"required": ["category_id", "name", "price", "stock"], "properties": {"name": {"type": "string", "description": "\u83dc\u54c1\u540d\u79f0", "example": "\u5bab\u4fdd\u9e21\u4e01", "minLength": 1, "maxLength": 50}, "price": {"type": "string", "description": "\u4ef7\u683c (\u683c\u5f0f\u5982 \"19.99\")", "example": "25.00"}, "stock": {"type": "integer", "description": "\u5e93\u5b58\u6570\u91cf (\u975e\u8d1f\u6574\u6570)", "example": 100, "minimum": 0}, "category_id": {"type": "integer", "description": "\u6240\u5c5e\u5206\u7c7b ID", "example": 1}, "image_url": {"type": "string", "description": "\u56fe\u7247\u94fe\u63a5 (URL)", "example": "http://example.com/image.jpg"}, "sales": {"type": "integer", "description": "\u521d\u59cb\u9500\u91cf (\u975e\u8d1f\u6574\u6570)", "default": 0, "example": 0, "minimum": 0}, "rating": {"type": "number", "description": "\u521d\u59cb\u8bc4\u5206 (0.0-5.0)", "default": 0.0, "example": 4.5, "minimum": 0.0, "maximum": 5.0}, "description": {"type": "string", "description": "\u83dc\u54c1\u63cf\u8ff0", "example": "\u7ecf\u5178\u5ddd\u83dc\uff0c\u5473\u9053\u9c9c\u7f8e", "maxLength": 255}, "is_available": {"type": "boolean", "description": "\u662f\u5426\u4e0a\u67b6", "default": true, "example": true}}, "type": "object"}, "DishOutput": {"properties": {"dish_id": {"type": "integer", "description": "\u83dc\u54c1 ID"}, "name": {"type": "string", "description": "\u83dc\u54c1\u540d\u79f0"}, "price": {"type": "string", "description": "\u4ef7\u683c"}, "stock": {"type": "integer", "description": "\u5e93\u5b58\u6570\u91cf"}, "image_url": {"type": "string", "description": "\u56fe\u7247\u94fe\u63a5"}, "sales": {"type": "integer", "description": "\u9500\u91cf"}, "rating": {"type": "number", "description": "\u8bc4\u5206"}, "description": {"type": "string", "description": "\u63cf\u8ff0"}, "category_id": {"type": "integer", "description": "\u5206\u7c7b ID"}, "category_name": {"type": "string", "description": "\u5206\u7c7b\u540d\u79f0"}, "is_available": {"type": "boolean", "description": "\u662f\u5426\u4e0a\u67b6"}, "created_at": {"type": "string", "format": "date-time", "description": "\u521b\u5efa\u65f6\u95f4 (ISO \u683c\u5f0f)"}, "updated_at": {"type": "string", "format": "date-time", "description": "\u66f4\u65b0\u65f6\u95f4 (ISO \u683c\u5f0f)"}}, "type": "object"}, "DishUpdateInput": {"properties": {"name": {"type": "string", "description": "\u65b0\u83dc\u54c1\u540d\u79f0", "example": "\u65b0\u5bab\u4fdd\u9e21\u4e01", "minLength": 1, "maxLength": 50}, "price": {"type": "string", "description": "\u65b0\u4ef7\u683c (\u683c\u5f0f\u5982 \"19.99\")", "example": "28.50"}, "stock": {"type": "integer", "description": "\u65b0\u5e93\u5b58\u6570\u91cf (\u975e\u8d1f\u6574\u6570)", "example": 50, "minimum": 0}, "category_id": {"type": "integer", "description": "\u65b0\u6240\u5c5e\u5206\u7c7b ID", "example": 2}, "image_url": {"type": "string", "description": "\u65b0\u56fe\u7247\u94fe\u63a5 (URL)", "example": "http://example.com/new_image.jpg"}, "sales": {"type": "integer", "description": "\u65b0\u9500\u91cf (\u975e\u8d1f\u6574\u6570)", "example": 10, "minimum": 0}, "rating": {"type": "number", "description": "\u65b0\u8bc4\u5206 (0.0-5.0)", "example": 4.8, "minimum": 0.0, "maximum": 5.0}, "description": {"type": "string", "description": "\u65b0\u83dc\u54c1\u63cf\u8ff0", "example": "\u6539\u826f\u7248\u7ecf\u5178\u5ddd\u83dc", "maxLength": 255}, "is_available": {"type": "boolean", "description": "\u65b0\u4e0a\u67b6\u72b6\u6001", "example": false}}, "type": "object"}, "SetAvailabilityInput": {"required": ["is_available"], "properties": {"is_available": {"type": "boolean", "description": "\u8bbe\u7f6e\u65b0\u7684\u4e0a\u67b6\u72b6\u6001 (true/false)"}}, "type": "object"}, "OrderOutput": {"properties": {"order_id": {"type": "integer", "description": "\u8ba2\u5355 ID"}, "user_id": {"type": "integer", "description": "\u7528\u6237 ID"}, "area_id": {"type": "integer", "description": "\u533a\u57df ID"}, "state": {"type": "string", "description": "\u8ba2\u5355\u72b6\u6001"}, "price": {"type": "string", "description": "\u8ba2\u5355\u603b\u91d1\u989d (\u5b57\u7b26\u4e32)"}, "payment_method": {"type": "string", "description": "\u652f\u4ed8\u65b9\u5f0f"}, "image_url": {"type": "string", "description": "\u652f\u4ed8\u51ed\u8bc1 URL"}, "created_at": {"type": "string", "format": "date-time", "description": "\u521b\u5efa\u65f6\u95f4 (ISO \u683c\u5f0f)"}, "updated_at": {"type": "string", "format": "date-time", "description": "\u66f4\u65b0\u65f6\u95f4 (ISO \u683c\u5f0f)"}, "deleted_at": {"type": "string", "format": "date-time", "description": "\u5220\u9664\u65f6\u95f4 (ISO \u683c\u5f0f)"}, "order_items": {"type": "array", "description": "\u8ba2\u5355\u9879\u5217\u8868", "items": {"$ref": "#/definitions/OrderItemOutput"}}}, "type": "object"}, "OrderItemOutput": {"properties": {"order_item_id": {"type": "integer", "description": "\u8ba2\u5355\u9879 ID"}, "dish_id": {"type": "integer", "description": "\u83dc\u54c1 ID"}, "dish_name": {"type": "string", "description": "\u83dc\u54c1\u540d\u79f0"}, "quantity": {"type": "integer", "description": "\u6570\u91cf"}, "unit_price": {"type": "string", "description": "\u4e0b\u5355\u65f6\u5355\u4ef7 (\u5b57\u7b26\u4e32)"}, "total": {"type": "string", "description": "\u8be5\u9879\u603b\u4ef7 (\u5b57\u7b26\u4e32)"}}, "type": "object"}, "OrderCreateInput": {"required": ["dish_list"], "properties": {"dish_list": {"type": "array", "description": "\u8ba2\u8d2d\u7684\u83dc\u54c1\u5217\u8868 (\u81f3\u5c11\u5305\u542b\u4e00\u9879)", "items": {"$ref": "#/definitions/DishItemInput"}}, "area_id": {"type": "integer", "description": "\u7528\u9910\u533a\u57df ID (\u53ef\u9009)", "example": 1}}, "type": "object"}, "DishItemInput": {"required": ["dish_id", "quantity"], "properties": {"dish_id": {"type": "integer", "description": "\u83dc\u54c1 ID", "example": 1}, "quantity": {"type": "integer", "description": "\u6570\u91cf (\u5fc5\u987b\u5927\u4e8e0)", "example": 2, "minimum": 1}}, "type": "object"}, "OrderListOutput": {"properties": {"items": {"type": "array", "items": {"$ref": "#/definitions/OrderOutput"}}, "page": {"type": "integer", "description": "\u5f53\u524d\u9875\u7801"}, "per_page": {"type": "integer", "description": "\u6bcf\u9875\u6570\u91cf"}, "total_items": {"type": "integer", "description": "\u603b\u9879\u76ee\u6570"}, "total_pages": {"type": "integer", "description": "\u603b\u9875\u6570"}}, "type": "object"}, "OrderUpdateInput": {"properties": {"state": {"type": "string", "description": "\u8ba2\u5355\u72b6\u6001 (\u4f8b\u5982: PAID, COMPLETED)", "example": "PAID"}, "payment_method": {"type": "string", "description": "\u652f\u4ed8\u65b9\u5f0f (\u4f8b\u5982: WECHAT, ALIPAY)", "example": "WECHAT"}, "image_url": {"type": "string", "description": "\u652f\u4ed8\u51ed\u8bc1\u56fe\u7247 URL", "example": "http://example.com/payment.jpg"}}, "type": "object"}, "UpdateOrderItemQuantity": {"required": ["quantity"], "properties": {"quantity": {"type": "integer", "description": "\u65b0\u6570\u91cf"}}, "type": "object"}, "DiningAreaCreateInput": {"required": ["area_name", "area_type"], "properties": {"area_name": {"type": "string", "description": "\u533a\u57df\u540d\u79f0 (\u5fc5\u987b\u552f\u4e00)", "example": "A1\u5305\u95f4", "minLength": 1, "maxLength": 50}, "max_capacity": {"type": "integer", "description": "\u6700\u5927\u5bb9\u91cf (\u6b63\u6574\u6570)", "example": 10, "minimum": 1}, "area_type": {"type": "string", "description": "\u533a\u57df\u7c7b\u578b", "example": "PRIVATE", "enum": ["PRIVATE", "TABLE", "BAR"]}}, "type": "object"}, "DiningAreaOutput": {"properties": {"area_id": {"type": "integer", "description": "\u533a\u57df ID"}, "area_name": {"type": "string", "description": "\u533a\u57df\u540d\u79f0"}, "state": {"type": "string", "description": "\u5f53\u524d\u72b6\u6001"}, "area_type": {"type": "string", "description": "\u533a\u57df\u7c7b\u578b"}, "max_capacity": {"type": "integer", "description": "\u6700\u5927\u5bb9\u91cf"}, "usage_count": {"type": "integer", "description": "\u4f7f\u7528\u6b21\u6570"}, "assigned_user_id": {"type": "integer", "description": "\u5f53\u524d\u5360\u7528\u7528\u6237 ID"}, "assigned_username": {"type": "string", "description": "\u5f53\u524d\u5360\u7528\u7528\u6237\u540d"}, "last_used": {"type": "string", "format": "date-time", "description": "\u4e0a\u6b21\u4f7f\u7528\u65f6\u95f4 (ISO \u683c\u5f0f)"}, "created_at": {"type": "string", "format": "date-time", "description": "\u521b\u5efa\u65f6\u95f4 (ISO \u683c\u5f0f)"}, "updated_at": {"type": "string", "format": "date-time", "description": "\u66f4\u65b0\u65f6\u95f4 (ISO \u683c\u5f0f)"}}, "type": "object"}, "DiningAreaUpdateInput": {"properties": {"area_name": {"type": "string", "description": "\u65b0\u533a\u57df\u540d\u79f0", "example": "\u8c6a\u534e\u5305\u95f4", "minLength": 1, "maxLength": 50}, "max_capacity": {"type": "integer", "description": "\u65b0\u6700\u5927\u5bb9\u91cf (\u6b63\u6574\u6570)", "example": 12, "minimum": 1}, "area_type": {"type": "string", "description": "\u65b0\u533a\u57df\u7c7b\u578b", "example": "PRIVATE", "enum": ["PRIVATE", "TABLE", "BAR"]}}, "type": "object"}, "DiningAreaAssignInput": {"required": ["user_id"], "properties": {"user_id": {"type": "integer", "description": "\u8981\u5206\u914d\u7ed9\u7684\u7528\u6237 ID", "example": 101}}, "type": "object"}, "AiChatInput": {"required": ["message"], "properties": {"message": {"type": "string", "description": "\u53d1\u9001\u7ed9 AI \u7684\u6d88\u606f", "example": "\u4f60\u597d\u5417\uff1f", "minLength": 1}}, "type": "object"}, "AiChatOutput": {"properties": {"response": {"type": "string", "description": "AI \u7684\u56de\u590d\u5185\u5bb9"}}, "type": "object"}, "ChatAskInput": {"required": ["question"], "properties": {"question": {"type": "string", "description": "\u7528\u6237\u7684\u95ee\u9898\u6216\u5185\u5bb9", "example": "\u63a8\u8350\u4e00\u4e2a\u6e05\u6de1\u7684\u83dc", "minLength": 1, "maxLength": 255}, "message_type": {"type": "string", "description": "\u6d88\u606f\u7c7b\u578b", "default": "TEXT", "example": "TEXT", "enum": ["TEXT", "VOICE", "IMAGE"]}, "image_url": {"type": "string", "description": "\u56fe\u7247 URL (\u5982\u679c\u6d88\u606f\u7c7b\u578b\u662f IMAGE)", "example": "http://example.com/image.jpg"}, "tags": {"type": "string", "description": "\u6807\u7b7e (\u9017\u53f7\u5206\u9694)", "example": "\u63a8\u8350,\u6e05\u6de1"}, "process_sync": {"type": "boolean", "description": "\u662f\u5426\u7acb\u5373\u5c1d\u8bd5\u83b7\u53d6 AI \u56de\u590d (\u9ed8\u8ba4 True)", "default": true}}, "type": "object"}, "ChatHistoryOutput": {"properties": {"items": {"type": "array", "items": {"$ref": "#/definitions/ChatOutput"}}, "page": {"type": "integer", "description": "\u5f53\u524d\u9875\u7801"}, "per_page": {"type": "integer", "description": "\u6bcf\u9875\u6570\u91cf"}, "total_items": {"type": "integer", "description": "\u603b\u9879\u76ee\u6570"}, "total_pages": {"type": "integer", "description": "\u603b\u9875\u6570"}}, "type": "object"}, "ChatOutput": {"properties": {"chat_id": {"type": "integer", "description": "\u804a\u5929\u8bb0\u5f55 ID"}, "user_id": {"type": "integer", "description": "\u7528\u6237 ID"}, "question": {"type": "string", "description": "\u7528\u6237\u95ee\u9898/\u5185\u5bb9"}, "answer": {"type": "string", "description": "AI/\u4eba\u5de5\u56de\u590d\u5185\u5bb9"}, "status": {"type": "string", "description": "\u72b6\u6001"}, "created_at": {"type": "string", "format": "date-time", "description": "\u521b\u5efa\u65f6\u95f4 (ISO \u683c\u5f0f)"}, "updated_at": {"type": "string", "format": "date-time", "description": "\u66f4\u65b0\u65f6\u95f4 (ISO \u683c\u5f0f)"}, "response_time": {"type": "number", "description": "AI \u54cd\u5e94\u65f6\u95f4 (\u79d2)"}, "confidence": {"type": "number", "description": "AI \u7f6e\u4fe1\u5ea6"}, "source": {"type": "string", "description": "\u56de\u590d\u6765\u6e90 (AI/\u4eba\u5de5)"}, "tags": {"type": "string", "description": "\u6807\u7b7e"}, "message_type": {"type": "string", "description": "\u6d88\u606f\u7c7b\u578b"}, "response_duration": {"type": "number", "description": "AI \u5904\u7406\u65f6\u957f (\u79d2)"}, "image_url": {"type": "string", "description": "\u56fe\u7247 URL"}}, "type": "object"}, "RecommendationOutput": {"properties": {"recommendations": {"type": "array", "description": "\u63a8\u8350\u7684\u83dc\u54c1\u5217\u8868", "items": {"$ref": "#/definitions/RecommendationItem"}}}, "type": "object"}, "RecommendationItem": {"properties": {"dish_id": {"type": "integer", "description": "\u63a8\u8350\u7684\u83dc\u54c1 ID", "example": 101}, "score": {"type": "number", "description": "\u63a8\u8350\u5206\u6570 (\u53ef\u80fd\u4ee3\u8868\u76f8\u4f3c\u5ea6\u3001\u9500\u91cf\u6216\u5176\u4ed6\u6307\u6807)", "example": 0.85}, "dish_name": {"type": "string", "description": "\u63a8\u8350\u83dc\u54c1\u540d\u79f0", "example": "\u5bab\u4fdd\u9e21\u4e01"}}, "type": "object"}, "UserLogin": {"required": ["account", "password"], "properties": {"account": {"type": "string", "description": "\u7528\u6237\u8d26\u53f7\u540d", "example": "john_doe"}, "password": {"type": "string", "description": "\u7528\u6237\u5bc6\u7801", "example": "StrongPwd!123"}}, "type": "object"}, "StaffCreate": {"required": ["account", "username"], "properties": {"account": {"type": "string", "description": "\u8d26\u53f7"}, "username": {"type": "string", "description": "\u7528\u6237\u540d"}, "password": {"type": "string", "description": "\u5bc6\u7801\uff08\u53ef\u9009\uff0c\u9ed8\u8ba4 hotmeal\uff09"}, "email": {"type": "string", "description": "\u90ae\u7bb1"}, "phone_number": {"type": "string", "description": "\u624b\u673a\u53f7"}, "favorite_cuisine": {"type": "string", "description": "\u504f\u597d\u83dc\u7cfb"}}, "type": "object"}}, "responses": {"ParseError": {"description": "When a mask can't be parsed"}, "MaskError": {"description": "When any error occurs on mask"}}}
